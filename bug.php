This code suffers from a race condition.  Imagine two users accessing `$counter` simultaneously. User 1 reads the value, say 10. Then user 2 also reads the value, also 10. Both increment their local copy to 11. Then both write their new value back to `$counter`. The final value will be 11, not 12, because the second write overwrites the result of the first.  This is a classic race condition problem.